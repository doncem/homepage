{% extends "_layouts/donatasmart.twig" %}

{% block page_contents %}
{% include "admin/_menu-components/" ~ active_menu ~ ".twig" ignore missing %}
{% endblock %}

{% block script %}
<script type="text/javascript">
//<!--
(function($) {
{% if active_menu == "content" %}
    if ($(".well > form .has-warning").length > 0) {
        $(".well > form .hide.alert-warning").removeClass("hide");
    }

    $(".well > form").submit(function(e) {
        e.preventDefault();
        var b = $(this).find("button[type='submit']");
        b.html("Saving..");
        $.post(
            "/ajax-admin/html/content",
            $(this).serialize(),
            function(response, textStatus, jqXHR) {
                if (response.answer === "success") {
                    b.html("Saved").addClass("btn-success");
                } else {
                    b.html("Failed").addClass("btn-danger");
                }

                setTimeout(function() { b.html("Save").removeClass("btn-success btn-danger"); }, 3000);
            },
            "json"
        );
    });
{% endif %}
})(jQuery);
//-->
</script>
{% endblock %}
