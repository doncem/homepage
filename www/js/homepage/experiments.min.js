var TOP_GAP_SCROLL=20;function activateExperiment(b){var a=b.children(".link-container").children("a");if(b.hasClass("active")){scrollToTop(b,TOP_GAP_SCROLL);window[getFunction(a.attr("href").substr(1))]()}else{if(a.attr("href").substr(0,1)==="#"){b.addClass("active");scrollToTop(b,TOP_GAP_SCROLL);window[getFunction(a.attr("href").substr(1))]()}else{window.location=$(this).attr("href")}}}function getFunction(c){var a=c.split("-"),b=a[0];for(i=1;i<a.length;i++){b+=a[i].substr(0,1).toUpperCase()+a[i].substr(1)}return b}$.fn.attachExperiment=function(){var a=$(this).attr("id");$("#"+a).on("click",".launch-link",function(b){b.preventDefault();activateExperiment($("#"+a))})};$(function(){$(".experiment").each(function(a,b){$(b).attachExperiment()});$(".development-history-link").click(function(a){a.preventDefault();$(this).next(".development-history").slideToggle("fast")});if((window.location.pathname===$("#menu a.active").attr("href"))&&($(window.location.hash).length>0)){activateExperiment($(window.location.hash))}else{if($(".experiment.active").length>0){activateExperiment($(".experiment.active").first())}}$(window).bind("hashchange",function(){if($(window.location.hash).length>0){activateExperiment($(window.location.hash))}})});var jqueryWindowGrid=function(){var x=$("#jquery-window-grid-container"),e='<div id="grid-element-" class="grid-element" data-x="" data-y=""></div>',p=4,o="#012345",l="#543210";var v=function(c,z){return Math.floor((c-p)/z-p-2*parseInt($(".grid-element").first().css("border-width")))};var a=function(c){return Math.floor((c-p)/(3+p))};var j=function(C,z,B,A,c){if(C==="prepend"){x.prepend(e)}else{x.append(e)}$("#grid-element-").attr("id","grid-element-"+q+"-"+f).attr("data-x",q).attr("data-y",f).animate({width:z+2,height:B+2,top:A,left:c,backgroundColor:o},"fast")};var n=function(){x.children("div").each(function(c,z){setTimeout(function(A){$(A).fadeOut("fast")},400)}).parent().hide("slow");$().toggleBrowserScrollbar(true)};var b=function(){q--;$("#grid-element-"+(q+1)+"-"+f).animate({backgroundColor:l},"fast");if($("#grid-element-"+q+"-"+f).length>0){$("#grid-element-"+q+"-"+f).animate({backgroundColor:o},"fast")}else{var z=$(".grid-element[data-x='"+q+"']"),c=$(".grid-element[data-y='"+f+"']");if(z.length>0){j("prepend",c.first().width(),c.first().height(),parseInt(c.first().css("top")),parseInt(z.first().css("left")))}else{if(c.length<y){w--;var A=v(x.width(),u-w+1);$(".grid-element").each(function(B,C){$(C).animate({left:(parseInt($(C).attr("data-x"))-q+1)*p+(parseInt($(C).attr("data-x"))-q)*(2*parseInt($(".grid-element").first().css("border-width"))+A),width:A},"fast")});j("prepend",A,c.first().height(),c.first().css("top"),p)}else{$(c[c.length-1]).animate({color:o},"fast");q=parseInt($(c[c.length-1]).attr("data-x"))}}}};var s=function(){f--;$("#grid-element-"+q+"-"+(f+1)).animate({backgroundColor:l},"fast");if($("#grid-element-"+q+"-"+f).length>0){$("#grid-element-"+q+"-"+f).animate({backgroundColor:o},"fast")}else{var z=$(".grid-element[data-x='"+q+"']"),c=$(".grid-element[data-y='"+f+"']");if(c.length>0){j("prepend",c.first().width(),c.first().height(),parseInt(c.first().css("top")),parseInt(z.first().css("left")))}else{if(z.length<d){t--;var A=v(x.height(),r-t+1);$(".grid-element").each(function(B,C){$(C).animate({top:(parseInt($(C).attr("data-y"))-f+1)*p+(parseInt($(C).attr("data-y"))-f)*(2*parseInt($(".grid-element").first().css("border-width"))+A),height:A},"fast")});j("prepend",z.first().width(),A,p,parseInt(z.first().css("left")))}else{$(z[z.length-1]).animate({color:o},"fast");f=parseInt($(z[z.length-1]).attr("data-y"))}}}};var g=function(){q++;$("#grid-element-"+(q-1)+"-"+f).animate({backgroundColor:l},"fast");if($("#grid-element-"+q+"-"+f).length>0){$("#grid-element-"+q+"-"+f).animate({backgroundColor:o},"fast")}else{var z=$(".grid-element[data-x='"+q+"']"),c=$(".grid-element[data-y='"+f+"']");if(z.length>0){j("append",c.first().width(),c.first().height(),parseInt(c.first().css("top")),parseInt(z.first().css("left")))}else{if(c.length<y){u++;var A=v(x.width(),u-w+1);$(".grid-element").each(function(B,C){$(C).animate({left:(u-w-q+parseInt($(C).attr("data-x"))+1)*p+(u-w-q+parseInt($(C).attr("data-x")))*(2*parseInt($(".grid-element").first().css("border-width"))+A),width:A},"fast")});j("append",A,c.first().height(),c.first().css("top"),(u-w+1)*p+(u-w)*(2*parseInt($(".grid-element").first().css("border-width"))+A))}else{$(c[0]).animate({color:o},"fast");q=parseInt($(c[0]).attr("data-x"))}}}};var h=function(){f++;$("#grid-element-"+q+"-"+(f-1)).animate({backgroundColor:l},"fast");if($("#grid-element-"+q+"-"+f).length>0){$("#grid-element-"+q+"-"+f).animate({backgroundColor:o},"fast")}else{var z=$(".grid-element[data-x='"+q+"']"),c=$(".grid-element[data-y='"+f+"']");if(c.length>0){j("append",c.first().width(),c.first().height(),parseInt(c.first().css("top")),parseInt(z.first().css("left")))}else{if(z.length<d){r++;var A=v(x.height(),r-t+1);$(".grid-element").each(function(B,C){$(C).animate({top:(r-t-f+parseInt($(C).attr("data-y"))+1)*p+(r-t-f+parseInt($(C).attr("data-y")))*(2*parseInt($(".grid-element").first().css("border-width"))+A),height:A},"fast")});j("append",z.first().width(),A,(r-t+1)*p+(r-t)*(2*parseInt($(".grid-element").first().css("border-width"))+A),z.first().css("left"))}else{$(z[0]).animate({color:o},"fast");f=parseInt($(z[0]).attr("data-y"))}}}};$().toggleBrowserScrollbar(false);if(x.children("div").length>1){x.show("slow").children("div").each(function(c,z){setTimeout(function(A){$(A).fadeIn("fast")},400)})}else{var q=1,f=1,y=a($(window).width()),d=a($(window).height()-parseInt($("body").css("padding-top"))),u=1,r=1,w=1,t=1;x.sizeWrapper(p).show("slow",function(){$(this).children("div").css({left:p,top:p,width:x.width()-(p+1),height:x.height()-(p+1),backgroundColor:o}).fadeIn("fast")})}var m=function(c){switch(c){case 27:n();break;case 37:b();break;case 38:s();break;case 39:g();break;case 40:h();break}};var k;$(window).keyup(function(c){c.preventDefault();k=setTimeout(m,k!==undefined?100:0,c.which)});$(window).resize(function(){y=a(x.width());d=a(x.height());var z=v(x.width(),u-w+1),c=v(x.height(),r-t+1);$(".grid-element").each(function(A,B){$(B).animate({top:(parseInt($(B).attr("data-y"))-t+1)*p+(parseInt($(B).attr("data-y"))-t)*(2*parseInt($(".grid-element").first().css("border-width"))+c),left:(parseInt($(B).attr("data-X"))-w+1)*p+(parseInt($(B).attr("data-x"))-w)*(2*parseInt($(".grid-element").first().css("border-width"))+z),width:z,height:c},"fast")})})};