var artists;var songs;var backspace=function(){var a=$("#search-q").val().split("");if(a.length>0){a.pop();$("#search-q").val(a.join(""))}};var shift=function(){var b=["Q","W","E","R","T","Y","U","I","O","P"];var a=$("#shift").html()==="ABC";$("#input-1 .letter").each(function(c,d){if(a){$(d).html(b[c])}else{$(d).html(c)}});if(a){$("#shift").html("1-2-3")}else{$("#shift").html("ABC")}};var space=function(){var a=$("#search-q").val().split("");a.push(" ");$("#search-q").val(a.join(""))};var doSearch=function(){if($("#search-q").val().length>0){}};var resizeMe=function(){var a=$(window).width();var b=$(window).height();$("#page").width(a);$("#page").height(b-$("#results-container > ul").height());$("#keyboard").width(a);$("#results").css({marginTop:$("#results-container > ul").height()});$("#results").height(b-$("#results-container > ul").height())};var initData=function(){(function(a,b){if(typeof define==="function"&&define.amd){define(["underscore","backbone"],function(c,d){return b(c||a._,d||a.Backbone)})}else{b(_,Backbone)}}(this,function(b,d){var a=new d.Model.extend({idAttribute:"_id",name:"name"});artists=new d.Collection.extend({model:a});artists.add(data.artists);var c=new d.Model.extend({idAttribute:"_id",artist_id:"artist_id",name:"name",filename:"filename",counter:"counter"});songs=new d.Collection.extend({model:c});songs.add(data.songs)}))};$(function(){var a=false;$.getJSON("/jukebox/get-songs",function(c){if(c.error!==undefined){$("#results").html("unable to load songs library: "+c.error);return}data=c.data;a=true;initData()}).error(function(){a=false;$("#results").html("something went wrong on server side - we can't search for songs :(")});resizeMe();$(window).resize(function(){resizeMe()});$("#search-clear").click(function(){$("#search-q").val("")});$("#search-container").on("focus","input",function(){if($("#keyboard-container").is(":hidden")){$("#keyboard-container").slideDown("slow")}});$(window).click(function(){if($("#search-container input:focus,#keyboard button:focus").length===0){$("#keyboard-container").slideUp("slow")}});$("#results-container").on("scroll","#results",function(){$("#keyboard-container").slideUp("slow")});var b=false;$("#keyboard button").click(function(){var c=$(this).attr("id");if((c!==undefined)&&(c!==false)){window[c]()}else{$("#search-q").val($("#search-q").val()+$(this).html())}if($("#search-q").val().length>2){if(a){if((b!==undefined)&&(b!==false)){clearTimeout(b)}b=setTimeout("doSearch()",500)}}})});